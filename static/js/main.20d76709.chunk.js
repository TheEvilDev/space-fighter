(this["webpackJsonpspace-fighter"]=this["webpackJsonpspace-fighter"]||[]).push([[0],{50:function(t,e,r){},55:function(t,e,r){},58:function(t,e,r){"use strict";r.r(e);var n=r(7),c=r(1),i=r.n(c),a=r(25),o=r.n(a),s=(r(50),r(13)),j=function(){var t=Object(s.e)(),e=t.camera,r=t.gl.domElement,i=Object(c.useRef)();return Object(s.c)((function(){var t=i.current;t&&t.update()})),Object(n.jsx)("orbitControls",{ref:i,args:[e,r],enableZoom:!1,maxAzimuthAngle:Math.PI/4,maxPolarAngle:Math.PI,minAzimuthAngle:-Math.PI/4,minPolarAngle:0})},u=r(0);var l=function(){var t=Object(c.useRef)(null),e=Object(c.useRef)(null),r=(new u.TextureLoader).load("target.png");return Object(s.c)((function(r){var n=r.mouse;t.current.position.y=10*-n.y,t.current.position.x=30*-n.x,e.current.position.y=20*-n.y,e.current.position.x=60*-n.x})),Object(n.jsxs)("group",{children:[Object(n.jsx)("sprite",{position:[0,0,-8],ref:t,children:Object(n.jsx)("spriteMaterial",{attach:"material",map:r})}),Object(n.jsx)("sprite",{position:[0,0,-16],ref:e,children:Object(n.jsx)("spriteMaterial",{attach:"material",map:r})})]})};var b=function(){var t=Object(c.useRef)(null);return Object(n.jsxs)("mesh",{visible:!0,position:[0,-50,0],rotation:[-Math.PI/2,0,0],ref:t,children:[Object(n.jsx)("planeBufferGeometry",{attach:"geometry",args:[5e3,5e3,128,128]}),Object(n.jsx)("meshStandardMaterial",{attach:"material",color:"white",roughness:1,metalness:0,wireframe:!0})]})};var O=function(){return Object(n.jsxs)("mesh",{visible:!0,position:[0,0,0],rotation:[0,0,0],children:[Object(n.jsx)("sphereGeometry",{attach:"geometry",args:[1,16,16]}),Object(n.jsx)("meshStandardMaterial",{attach:"material",color:"white",transparent:!0,opacity:.6,roughness:1,metalness:0})]})},x=r(3),h=r(11),f=r(39),d=Object(h.b)({key:"shipPosition",default:{position:{},rotation:{}}}),m=Object(h.b)({key:"enemyPosition",default:[{x:-10,y:10,z:-80},{x:20,y:0,z:-100},{x:30,y:0,z:-60},{x:50,y:0,z:-20}]}),p=Object(h.b)({key:"laserPositions",default:[]}),y=Object(h.b)({key:"score",default:0}),g=function(){var t=Object(c.useRef)(null),e=Object(h.d)(d),r=Object(x.a)(e,2),i=r[0],a=r[1],o=Object(s.d)(f.a,"./models/arwing.glb").nodes;return Object(s.c)((function(t){var e=t.mouse;a({position:{x:6*e.x,y:2*e.y},rotation:{z:.5*-e.x,x:.5*-e.x,y:.2*-e.y}})})),Object(s.c)((function(){t.current.rotation.z=i.rotation.z,t.current.rotation.y=i.rotation.x,t.current.rotation.x=i.rotation.y,t.current.position.y=i.position.y,t.current.position.x=i.position.x})),Object(n.jsx)("group",{ref:t,children:Object(n.jsx)("mesh",{visible:!0,geometry:o.Default.geometry,children:Object(n.jsx)("meshStandardMaterial",{attach:"material",color:"white",roughness:.3,metalness:.3})})})};r(55);var v=function(){var t=Object(h.e)(p);return Object(n.jsx)("group",{children:t.map((function(t){return Object(n.jsxs)("mesh",{position:[t.x,t.y,t.z],children:[Object(n.jsx)("boxBufferGeometry",{attach:"geometry",args:[1,1,1]}),Object(n.jsx)("meshStandardMaterial",{attach:"material",emissive:new u.Color("white"),wireframe:!0})]},"".concat(t.id))}))})},z=r(14);var M=function(){var t=Object(h.e)(d),e=Object(h.d)(p),r=Object(x.a)(e,2),c=r[0],i=r[1];return Object(n.jsxs)("mesh",{position:[0,0,-8],onClick:function(){return i([].concat(Object(z.a)(c),[{id:Math.random(),x:0,y:0,z:0,velocity:[6*t.rotation.x,5*t.rotation.y]}]))},children:[Object(n.jsx)("planeBufferGeometry",{attach:"geometry",args:[100,100]}),Object(n.jsx)("meshStandardMaterial",{attach:"material",color:"orange",emissive:new u.Color("#ff0860"),visible:!1})]})};var w=function(){var t=Object(h.e)(m);return Object(n.jsx)("group",{children:t.map((function(t){return Object(n.jsxs)("mesh",{position:[t.x,t.y,t.z],children:[Object(n.jsx)("sphereBufferGeometry",{attach:"geometry",args:[2,8,8]}),Object(n.jsx)("meshStandardMaterial",{attach:"material",color:"white",wireframe:!0})]},"".concat(t.x))}))})};var P=function(){var t=Object(h.d)(m),e=Object(x.a)(t,2),r=e[0],n=e[1],c=Object(h.d)(p),i=Object(x.a)(c,2),a=i[0],o=i[1],j=Object(h.d)(y),u=Object(x.a)(j,2),l=u[0],b=u[1];return Object(s.c)((function(t){t.mouse;var e=r?r.map((function(t){return a.filter((function(e){return a.filter((function(e){return function(t,e){var r=e.x-t.x,n=e.y-t.y,c=e.z-t.z;return Math.sqrt(r*r+n*n+c*c)}(e,t)<3})).length>0})).length>0})):[];e.includes(!0)&&r.length>0&&(b(l+e.filter((function(t){return t})).length),console.log("hit detected")),n(r.map((function(t){return{x:t.x,y:t.y,z:t.z+.1}})).filter((function(t,r){return!e[r]&&t.z<0}))),o(a.map((function(t){return{id:t.id,x:t.x+t.velocity[0],y:t.y+t.velocity[1],z:t.z-1,velocity:t.velocity}})).filter((function(t){return t.z>-100&&t.y>-50})))})),null},S=r(40);function k(){var t=Object(S.a)(["\n    position: absolute;\n    top: 30px;\n    right: 30px;\n    z-index: 1000;\n    color: #FFF;\n"]);return k=function(){return t},t}var C=r(41).a.section(k()),F=function(){var t=Object(h.e)(y);return Object(n.jsxs)(C,{children:["Score: ",1e3*t]})},A=r(4),B=r(15),I=function(t){var e=t.children,r=Object(B.a)(t,["children"]),c=Object(h.c)();return Object(n.jsx)(s.a,Object(A.a)(Object(A.a)({},r),{},{children:Object(n.jsx)(c,{children:e})}))};function G(){return Object(n.jsxs)(h.a,{children:[Object(n.jsx)(F,{}),Object(n.jsxs)(I,{style:{background:"#171717"},children:[Object(n.jsx)(j,{}),Object(n.jsx)("directionalLight",{intensity:.5}),Object(n.jsx)(c.Suspense,{fallback:Object(n.jsx)(O,{}),children:Object(n.jsx)(g,{})}),Object(n.jsx)(b,{}),Object(n.jsx)(l,{}),Object(n.jsx)(v,{}),Object(n.jsx)(M,{}),Object(n.jsx)(w,{}),Object(n.jsx)(P,{})]})]})}var R=function(t){t&&t instanceof Function&&r.e(3).then(r.bind(null,59)).then((function(e){var r=e.getCLS,n=e.getFID,c=e.getFCP,i=e.getLCP,a=e.getTTFB;r(t),n(t),c(t),i(t),a(t)}))},L=r(45);Object(s.b)({OrbitControls:L.a}),o.a.render(Object(n.jsx)(i.a.StrictMode,{children:Object(n.jsx)(G,{})}),document.getElementById("root")),R()}},[[58,1,2]]]);
//# sourceMappingURL=main.20d76709.chunk.js.map