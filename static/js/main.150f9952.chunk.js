(this["webpackJsonpspace-fighter"]=this["webpackJsonpspace-fighter"]||[]).push([[0],{51:function(e,t,n){},56:function(e,t,n){},59:function(e,t,n){"use strict";n.r(t);var r=n(7),c=n(0),i=n.n(c),a=n(25),o=n.n(a),s=(n(51),n(36)),j=n(16),u=function(){var e=Object(j.d)(),t=e.camera,n=e.gl.domElement;return Object(c.useEffect)((function(){var e=new s.a(t,n);return e.connect(),function(){e.disconnect()}}),[t,n]),null},l=n(1);var b=function(){var e=Object(c.useRef)(null),t=Object(c.useRef)(null),n=(new l.TextureLoader).load("target.png");return Object(j.b)((function(n){var r=n.mouse;e.current.position.y=10*r.y,e.current.position.x=30*r.x,t.current.position.y=20*r.y,t.current.position.x=60*r.x})),Object(r.jsxs)("group",{children:[Object(r.jsx)("sprite",{position:[0,0,-8],ref:e,children:Object(r.jsx)("spriteMaterial",{attach:"material",map:n})}),Object(r.jsx)("sprite",{position:[0,0,-16],ref:t,children:Object(r.jsx)("spriteMaterial",{attach:"material",map:n})})]})};var O=function(){var e=Object(c.useRef)(null);return Object(r.jsxs)("mesh",{visible:!0,position:[0,-50,0],rotation:[-Math.PI/2,0,0],ref:e,children:[Object(r.jsx)("planeBufferGeometry",{attach:"geometry",args:[5e3,5e3,128,128]}),Object(r.jsx)("meshStandardMaterial",{attach:"material",color:"white",roughness:1,metalness:0,wireframe:!0})]})},f=n(11),h=n(40),d=(n(56),Object(f.b)({key:"shipPosition",default:{position:{},rotation:{}}})),x=(Object(f.b)({key:"playerPosition",default:{position:{},rotation:{}}}),Object(f.b)({key:"enemyPosition",default:[{x:-10,y:10,z:-80},{x:20,y:0,z:-100},{x:30,y:0,z:-60},{x:50,y:0,z:-20}]})),p=Object(f.b)({key:"laserPositions",default:[]}),m=Object(f.b)({key:"score",default:0});var y=function(){var e=Object(f.e)(p);return Object(r.jsx)("group",{children:e.map((function(e){return Object(r.jsxs)("mesh",{position:[e.x,e.y,e.z],children:[Object(r.jsx)("sphereBufferGeometry",{attach:"geometry",args:[.25,16,16]}),Object(r.jsx)("meshStandardMaterial",{attach:"material",emissive:new l.Color("white"),wireframe:!0})]},"".concat(e.id))}))})},g=n(13),v=n(3);var z=function(){var e=Object(f.e)(d),t=Object(f.d)(p),n=Object(v.a)(t,2),c=n[0],i=n[1];return Object(r.jsxs)("mesh",{position:[0,0,-8],onClick:function(){return i([].concat(Object(g.a)(c),[{id:Math.random(),x:0,y:0,z:0,velocity:[6*e.rotation.x,5*e.rotation.y]}]))},children:[Object(r.jsx)("planeBufferGeometry",{attach:"geometry",args:[100,100]}),Object(r.jsx)("meshStandardMaterial",{attach:"material",color:"orange",emissive:new l.Color("#ff0860"),visible:!1})]})};var w=function(){return Object(r.jsxs)("mesh",{visible:!0,position:[0,0,0],rotation:[0,0,0],children:[Object(r.jsx)("sphereGeometry",{attach:"geometry",args:[1,16,16]}),Object(r.jsx)("meshStandardMaterial",{attach:"material",color:"white",transparent:!0,opacity:.6,roughness:1,metalness:0})]})},M=n(41),k=function(e){var t=e.position,n=Object(c.useRef)(null),i=Object(j.c)(M.a,"./models/creepy-face.glb").nodes;return Object(r.jsx)("group",{ref:n,position:[t.x,t.y,t.z],children:Object(r.jsx)("mesh",{visible:!0,geometry:i.Quad_Sphere.geometry,children:Object(r.jsx)("meshStandardMaterial",{attach:"material",color:"white",roughness:.3,metalness:.3})})})};var S=function(){var e=Object(f.e)(x);return Object(r.jsx)("group",{children:e.map((function(e){return Object(r.jsx)(c.Suspense,{fallback:Object(r.jsx)(w,{}),children:Object(r.jsx)(k,{position:e},"".concat(e.x))})}))})};var C=function(){var e=Object(f.d)(x),t=Object(v.a)(e,2),n=t[0],r=t[1],c=Object(f.d)(p),i=Object(v.a)(c,2),a=i[0],o=i[1],s=Object(f.d)(m),u=Object(v.a)(s,2),l=u[0],b=u[1];return Object(j.b)((function(e){e.mouse;var t=n?n.map((function(e){return a.filter((function(t){return a.filter((function(t){return function(e,t){var n=t.x-e.x,r=t.y-e.y,c=t.z-e.z;return Math.sqrt(n*n+r*r+c*c)}(t,e)<3})).length>0})).length>0})):[];t.includes(!0)&&n.length>0&&(b(l+t.filter((function(e){return e})).length),console.log("hit detected")),r(n.map((function(e){return{x:e.x,y:e.y,z:e.z}})).filter((function(e,n){return!t[n]&&e.z<0}))),o(a.map((function(e){return{id:e.id,x:e.x+e.velocity[0],y:e.y+e.velocity[1],z:e.z-1,velocity:e.velocity}})).filter((function(e){return e.z>-100&&e.y>-50})))})),null},F=n(42);function P(){var e=Object(F.a)(["\n    position: absolute;\n    top: 30px;\n    right: 30px;\n    z-index: 1000;\n    color: #FFF;\n"]);return P=function(){return e},e}var B=n(43).a.section(P()),G=function(){var e=Object(f.e)(m);return Object(r.jsxs)(B,{children:["Score: ",1e3*e]})},L=n(4),R=n(14),E=function(e){var t=e.children,n=Object(R.a)(e,["children"]),c=Object(f.c)();return Object(r.jsx)(j.a,Object(L.a)(Object(L.a)({},n),{},{children:Object(r.jsx)(c,{children:t})}))};function I(){return Object(r.jsxs)(f.a,{children:[Object(r.jsx)(G,{}),Object(r.jsxs)(E,{style:{background:"#171717"},vr:!0,onCreated:function(e){var t=e.gl;return document.body.appendChild(h.a.createButton(t))},children:[Object(r.jsx)(u,{}),Object(r.jsx)("directionalLight",{intensity:.5}),Object(r.jsx)(b,{}),Object(r.jsx)(O,{}),Object(r.jsx)(y,{}),Object(r.jsx)(z,{}),Object(r.jsx)(S,{}),Object(r.jsx)(C,{})]})]})}var T=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,60)).then((function(t){var n=t.getCLS,r=t.getFID,c=t.getFCP,i=t.getLCP,a=t.getTTFB;n(e),r(e),c(e),i(e),a(e)}))};o.a.render(Object(r.jsx)(i.a.StrictMode,{children:Object(r.jsx)(I,{})}),document.getElementById("root")),T()}},[[59,1,2]]]);
//# sourceMappingURL=main.150f9952.chunk.js.map